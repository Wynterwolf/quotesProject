<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Supernatural Quotes</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles/quote_style.css') }}"
    />
  </head>
  <body>
    <h1>Supernatural Quotes</h1>

    {% if quote %}
    <h2>Random Quote</h2>
    <p><strong>Season:</strong> {{ quote['season'] }}</p>
    <p><strong>Episode:</strong> {{ quote['episode'] }}</p>
    <p><strong>Characters:</strong> {{ quote['characters'] }}</p>
    <p><strong>Quote:</strong> {{ quote['quote'] | safe }}</p>
    {% else %}
    <p>No quotes available.</p>
    {% endif %}

    <h2>Add a New Quote</h2>
    <form action="{{ url_for('add_quote') }}" method="POST">
      <!-- Season dropdown -->
      <label for="season">Season:</label>
      <select id="season" name="season" onchange="updateEpisodes()">
        <option value="Season 1">Season 1</option>
        <option value="Season 2">Season 2</option>
        <option value="Season 3">Season 3</option>
        <option value="Season 4">Season 4</option>
        <option value="Season 5">Season 5</option>
        <option value="Season 6">Season 6</option>
        <option value="Season 7">Season 7</option>
        <option value="Season 8">Season 8</option>
        <option value="Season 9">Season 9</option>
        <option value="Season 10">Season 10</option>
        <option value="Season 11">Season 11</option>
        <option value="Season 12">Season 12</option>
        <option value="Season 13">Season 13</option>
        <option value="Season 14">Season 14</option>
        <option value="Season 15">Season 15</option>
      </select>

      <!-- Episode input field -->
      <label for="episode">Episode:</label>
      <select id="episode" name="episode">
        <!-- Options will be dynamically populated based on the selected season -->
      </select>

      <!-- Characters dropdown with custom multiple select -->
      <label for="character">Character(s):</label>
      <div id="character-container">
        <div class="character-checkbox">
          <label
            ><input
              type="checkbox"
              name="characters[]"
              value="Dean Winchester"
            />
            Dean Winchester</label
          >
          <label
            ><input
              type="checkbox"
              name="characters[]"
              value="Sam Winchester"
            />
            Sam Winchester</label
          >
          <label
            ><input type="checkbox" name="characters[]" value="Castiel" />
            Castiel</label
          >
          <label
            ><input type="checkbox" name="characters[]" value="Bobby Singer" />
            Bobby Singer</label
          >
          <!-- Add more checkboxes as needed -->
        </div>
        <button type="button" id="add-character" class="btn btn-secondary">
          Add Character
        </button>
      </div>

      <!-- Quote input field -->
      <label for="quote">Quote:</label>
      <textarea id="quote" name="quote" rows="4" cols="50"></textarea
      ><br /><br />

      <!-- Submit button -->
      <input type="submit" value="Add Quote" />
    </form>

    <!-- JavaScript to dynamically update episodes -->
    <script>
      const episodes = {
        "Season 1": [
          "1.01 Pilot",
          "1.02 Wendigo",
          "1.03 Dead in the Water",
          "1.04 Phantom Traveler",
          "1.05 Bloody Mary",
          "1.06 Skin",
          "1.07 Hook Man",
          "1.08 Bugs",
          "1.09 Home",
          "1.10 Asylum",
          "1.11 Scarecrow",
          "1.12 Faith",
          "1.13 Route 666",
          "1.14 Nightmare",
          "1.15 The Benders",
          "1.16 Shadow",
          "1.17 Hell House",
          "1.18 Something Wicked",
          "1.19 Provenance",
          "1.20 Dead Man's Blood",
          "1.21 Salvation",
          "1.22 Devil's Trap,",
        ],
        "Season 2": [
          "2.01 In My Time of Dying",
          "2.02 Everybody Loves a Clown",
          "2.03 Bloodlust",
          "2.04 Children Shouldn't Play with Dead Things",
          "2.05 Simon Said",
          "2.06 No Exit",
          "2.07 The Usual Suspects",
          "2.08 Crossroad Blues",
          "2.09 Croatoan",
          "2.10 Hunted",
          "2.11 Playthings",
          "2.12 Nightshifter",
          "2.13 Houses of the Holy",
          "2.14 Born Under a Bad Sign",
          "2.15 Tall Tales",
          "2.16 Roadkill",
          "2.17 Heart",
          "2.18 Hollywood Babylon",
          "2.19 Folsom Prison Blues",
          "2.20 What Is and What Should Never Be",
          "2.21 All Hell Breaks Loose: Part One",
          "2.22 All Hell Breaks Loose: Part Two",
        ],
        "Season 3": [
          "3.01 The Magnificent Seven",
          "3.02 The Kids Are Alright",
          "3.03 Bad Day at Black Rock",
          "3.04 Sin City",
          "3.05 Bedtime Stories",
          "3.06 Red Sky at Morning",
          "3.07 Fresh Blood",
          "3.08 A Very Supernatural Christmas",
          "3.09 Malleus Maleficarum",
          "3.10 Dream a Little Dream of Me",
          "3.11 Mystery Spot",
          "3.12 Jus in Bello",
          "3.13 Ghostfacers",
          "3.14 Long-Distance Call",
          "3.15 Time Is on My Side",
          "3.16 No Rest for the Wicked",
        ],
        "Season 4": [
          "4.01 Lazarus Rising",
          "4.02 Are You There, God? It's Me, Dean Winchester",
          "4.03 In the Beginning",
          "4.04 Metamorphosis",
          "4.05 Monster Movie",
          "4.06 Yellow Fever",
          "4.07 It's the Great Pumpkin, Sam Winchester",
          "4.08 Wishful Thinking",
          "4.09 I Know What You Did Last Summer",
          "4.10 Heaven and Hell",
          "4.11 Family Remains",
          "4.12 Criss Angel Is a Douchebag",
          "4.13 After School Special",
          "4.14 Sex and Violence",
          "4.15 Death Takes a Holiday",
          "4.16 On the Head of a Pin",
          "4.17 It's a Terrible Life",
          "4.18 The Monster at the End of This Book",
          "4.19 Jump the Shark",
          "4.20 The Rapture",
          "4.21 When the Levee Breaks",
          "4.22 Lucifer Rising",
        ],
        "Season 5": [
          "5.01 Sympathy for the Devil",
          "5.02 Good God, Y'all",
          "5.03 Free to Be You and Me",
          "5.04 The End",
          "5.05 Fallen Idols",
          "5.06 I Believe the Children Are Our Future",
          "5.07 The Curious Case of Dean Winchester",
          "5.08 Changing Channels",
          "5.09 The Real Ghostbusters",
          "5.10 Abandon All Hope...",
          "5.11 Sam, Interrupted",
          "5.12 Swap Meat",
          "5.13 The Song Remains the Same",
          "5.14 My Bloody Valentine",
          "5.15 Dead Men Don't Wear Plaid",
          "5.16 Dark Side of the Moon",
          "5.17 99 Problems",
          "5.18 Point of No Return",
          "5.19 Hammer of the Gods",
          "5.20 The Devil You Know",
          "5.21 Two Minutes to Midnight",
          "5.22 Swan Song",
        ],
      };
      // Add more seasons and their corresponding episodes
      function updateEpisodes() {
        const seasonSelect = document.getElementById("season");
        const episodeSelect = document.getElementById("episode");
        const selectedSeason = seasonSelect.value;

        // Clear current episode options
        episodeSelect.innerHTML = "";

        // Populate episodes based on the selected season
        episodes[selectedSeason].forEach(function (episode) {
          const option = document.createElement("option");
          option.value = episode;
          option.text = episode;
          episodeSelect.add(option);
        });
      }

      // Ensure episodes are loaded when the page loads
      window.onload = function () {
        updateEpisodes(); // Populate episodes on initial load
      };

      // JavaScript for enhancing the custom multiple select
      document
        .querySelectorAll(".custom-multiple-select select")
        .forEach((select) => {
          select.addEventListener("click", function (event) {
            const options = this.options;
            const values = [];
            for (let i = 0; i < options.length; i++) {
              if (options[i].selected) {
                values.push(options[i].text);
              }
            }
            this.title = values.join(", ");
          });
        });
    </script>

    <!-- functionality to denamically add characters -->
    <script>
      document
        .getElementById("add-character")
        .addEventListener("click", function () {
          var container = document.querySelector(".character-checkbox");

          // Prompt the user to enter a character name
          var characterName = prompt("Enter the character's name:");

          // Only proceed if the user entered a name
          if (characterName) {
            var newLabel = document.createElement("label");
            var newCheckbox = document.createElement("input");
            newCheckbox.type = "checkbox";
            newCheckbox.name = "characters[]";
            newCheckbox.value = characterName; // Use the entered name as the value

            newLabel.textContent = characterName; // Use the entered name as the label text
            newLabel.prepend(newCheckbox);

            container.appendChild(newLabel);
          }
        });
    </script>
  </body>
</html>
